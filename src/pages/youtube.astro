---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
import "@fontsource-variable/onest";
---


<Layout title="Download from Youtube">
    <main class="w-full h-full min-w-screen min-h-screen relative">
        <Nav />
        <section class="w-full pt-48">
            <div class="flex justify-center items-center flex-col gap-2 w-full">
                <h1
                    class="text-white lg:text-7xl text-5xl text-center font-bold capitalize leading-[3.7rem]"
                >
                    <span class="text-[#6F272B] bg-white rounded-lg px-2"
                        >Youtube</span
                    > video <span class="text-transparent bg-clip-text bg-gradient-to-br from-pink-600 to-red-400">downloader</span>
                </h1>
                <label
                    set:text="Paste the link here"
                    for="link"
                    class="text-white/85 lg:text-2xl md:text-lg text-md text-center"
                />
                <form class="flex md:flex-row flex-col gap-4 mt-6">
                    <div class="relative">
                        <input
                            title="link"
                            name="link"
                            id="link"
                            type="text"
                            required
                            class="lg:w-[550px] w-[350px] max-w-lg h-10 bg-neutral-900 rounded-lg relative z-20 m-[2px] border-none text-white px-3"
                        />
                        <div
                            class="bg-gradient-to-br from-red-900 to-violet-500 absolute top-0 bottom-0 left-0 right-0 rounded-lg z-0"
                        >
                        </div>
                    </div>
                    <button
                        class="text-[#6F272B] bg-white h-10 rounded-3xl px-8 lg:text-lg md:text-md sm:text-sm py-auto mx-auto" type="submit"
                        >Download</button
                    >
                </form>
            </div>
        </section>
    </main>
</Layout>

<script>

    function submitHandle (e){
        e.preventDefault()
        const url = document.querySelector('input').value
        // https://www.youtube.com/watch?v=0hTIMqFIXno&ab_channel=LMDOrslok
        const urlObj = new URL(url)
        const parametros = new URLSearchParams(urlObj.search);

        const redirect_url = `/youtube/url?v=${parametros.get('v')}&ab_channel=${parametros.get('ab_channel')}`

        console.log(redirect_url)
        // window.location.href = '/youtube/url?' + urlSearchParams.toString()
}


        // alert(url)

    document.querySelector('form').addEventListener('submit', submitHandle)

</script>

<style>
    h1,
    label,
    button {
        font-family: "Onest Variable", sans-serif;
    }
</style>
